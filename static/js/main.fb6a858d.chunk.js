(this["webpackJsonpreact-pixel"]=this["webpackJsonpreact-pixel"]||[]).push([[0],{229:function(e,t,n){},230:function(e,t,n){},523:function(e,t,n){},587:function(e,t,n){},588:function(e,t,n){},589:function(e,t,n){},698:function(e,t,n){},699:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),r=n(25),a=n.n(r),s=(n(229),n(6)),i=(n(230),n(217)),l=(n(523),n(4));function u(e){var t=Object(o.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],u=function(t){t.target.classList.contains("modal-component")||e.close()};return Object(o.useEffect)((function(){return window.addEventListener("mousedown",u),Object(i.a)((function(){window.removeEventListener("mousedown",u)}))}),[]),Object(l.jsx)(c.a.Fragment,{children:"MultiDraw"==e.window?Object(l.jsxs)("div",{className:"Modal modal-component",children:[Object(l.jsx)("h1",{className:"modal-component",children:"Join/Create MultiDraw Room"}),Object(l.jsx)("input",{onChange:function(e){e.preventDefault(),a((function(t){return e.target.value}))},placeholder:"Room Name",value:r,className:"modal-component"}),Object(l.jsx)("button",{className:"modal-component",onClick:function(){return e.click(r)},children:"Join"})]}):Object(l.jsxs)("div",{className:"Modal modal-component",children:[Object(l.jsx)("h1",{className:"modal-component",children:"Resize"}),Object(l.jsx)("button",{children:"+"}),Object(l.jsx)("button",{children:"-"})]})})}var d=n(5),b=n.n(d),j=n(47),m=n(219),f=n.n(m),g=n(225),h=n(131);n(587);function O(e){if(!e&&0!==e)return null;try{var t=sessionStorage.getItem(e);return t?JSON.parse(t):null}catch(n){return console.log(n),null}}function v(e,t){for(var n=0;n<e.length;n++){var o=document.getElementById("[".concat(e[n][0][0],", ").concat(e[n][0][1],"]"));o.style.backgroundColor="undo"===t?e[n][1]:e[n][2]}}n(128),n(588);function x(e){var t=e.grid,n=e.backgroundColor,o=e.dimension,c=e.zoom,r=e.pid,a=e.rid;return Object(l.jsx)("div",{className:"pixel",id:"[".concat(a,", ").concat(r,"]"),onMouseOver:function(e){e.target.style.border="1px solid black"},onMouseLeave:function(e){e.target.style.border="none"},style:{boxShadow:t?"inset 0 0 1px black":"none",backgroundColor:n,width:"".concat(c/o,"px"),height:"".concat(c/o,"px")}})}n(589);function p(e){for(var t=e.backgroundColor,n=e.dimension,o=e.zoom,c=e.rid,r=e.grid,a=[],s=0;s<n;s++)a.push(Object(l.jsx)(x,{rid:c,pid:s,grid:r,zoom:o,dimension:n,backgroundColor:t},s));return Object(l.jsx)("div",{className:"row",children:a})}var C=c.a.memo((function(e){for(var t=e.dimension,n=e.backgroundColor,c=e.zoom,r=e.grid,a=Object(o.useRef)(),s=[],i=0;i<t;i++)console.log("redrawing"),s.push(Object(l.jsx)(p,{grid:r,rid:i,zoom:c,dimension:t,backgroundColor:n},i));return Object(l.jsx)("div",{id:"canvas",ref:a,children:s})})),y=n(224);function k(e){return Object(l.jsx)(y.a,{disableAlpha:!0,onChangeComplete:function(t){return e.changeColor(t.hex,!0)},colors:["FFFFFF","#E8E8E8","#E0E0E0","#C0C0C0","#888888","#585858","#202020","#000000","#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"]})}function w(e){var t=e.currentColor,n=e.size,c=Object(o.useState)([]),r=Object(s.a)(c,2),a=(r[0],r[1]),i=Object(o.useState)(!1),l=Object(s.a)(i,2),u=(l[0],l[1]),d=!1,m=[];Object(o.useEffect)((function(){return console.log("attaching event listener to brush with color: "+t),window.addEventListener("mousedown",O),window.addEventListener("mousemove",f),window.addEventListener("mouseleave",g),window.addEventListener("mouseup",g),function(){console.log("removing event listeners"),window.removeEventListener("mousedown",O),window.removeEventListener("mousemove",f),window.removeEventListener("mouseleave",g),window.removeEventListener("mouseup",g)}}),[t,n]);var f=function(e){d&&Math.floor(e.timeStamp)%2!==0&&u((function(t){return e.target.id===t?t:(O(e),e.target.id)}))},g=function(t){d=!1,m.length>0&&(e.history(m),m=[],a((function(e){return[]})))},h=function(e){m?e[1]!==e[2]&&m.push(e):m.push(e)},O=function(){var e=Object(j.a)(b.a.mark((function e(o){var c,r,a,s,i,l,u,j,m,f,g,O,v,x;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.preventDefault(),o.target.classList.contains("pixel")){e.next=3;break}return e.abrupt("return");case 3:return d=!0,e.next=6,JSON.parse(o.target.id);case 6:e.t0=e.sent,e.t1=o.target.style.backgroundColor,e.t2=t,c=[e.t0,e.t1,e.t2],o.target.style.backgroundColor=t,h(c),r=c[0],2===n?(a=document.getElementById("[".concat(r[0],", ").concat(r[1]+1,"]")),s=document.getElementById("[".concat(r[0],", ").concat(r[1]-1,"]")),i=document.getElementById("[".concat(r[0]+1,", ").concat(r[1],"]")),l=document.getElementById("[".concat(r[0]-1,", ").concat(r[1],"]")),a&&(h([[r[0],r[1]+1],a.style.backgroundColor,t]),a.style.backgroundColor=t),s&&(h([[r[0],r[1]-1],s.style.backgroundColor,t]),s.style.backgroundColor=t),i&&(h([[r[0]+1,r[1]],i.style.backgroundColor,t]),i.style.backgroundColor=t),l&&(h([[r[0]-1,r[1]],l.style.backgroundColor,t]),l.style.backgroundColor=t)):3===n&&(u=document.getElementById("[".concat(r[0],", ").concat(r[1]+1,"]")),j=document.getElementById("[".concat(r[0],", ").concat(r[1]-1,"]")),m=document.getElementById("[".concat(r[0]+1,", ").concat(r[1],"]")),f=document.getElementById("[".concat(r[0]-1,", ").concat(r[1],"]")),g=document.getElementById("[".concat(r[0]+1,", ").concat(r[1]+1,"]")),O=document.getElementById("[".concat(r[0]+1,", ").concat(r[1]-1,"]")),v=document.getElementById("[".concat(r[0]-1,", ").concat(r[1]+1,"]")),x=document.getElementById("[".concat(r[0]-1,", ").concat(r[1]-1,"]")),u&&(h([[r[0],r[1]+1],u.style.backgroundColor,t]),u.style.backgroundColor=t),j&&(h([[r[0],r[1]-1],j.style.backgroundColor,t]),j.style.backgroundColor=t),m&&(h([[r[0]+1,r[1]],m.style.backgroundColor,t]),m.style.backgroundColor=t),f&&(h([[r[0]-1,r[1]],f.style.backgroundColor,t]),f.style.backgroundColor=t),g&&(h([[r[0]+1,r[1]+1],g.style.backgroundColor,t]),g.style.backgroundColor=t),O&&(h([[r[0]+1,r[1]-1],O.style.backgroundColor,t]),O.style.backgroundColor=t),v&&(h([[r[0]-1,r[1]+1],v.style.backgroundColor,t]),v.style.backgroundColor=t),x&&(h([[r[0]-1,r[1]-1],x.style.backgroundColor,t]),x.style.backgroundColor=t));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null}var E=new f.a({dataOnly:!0});function S(e){var t=Object(o.useState)(e.dimension),n=Object(s.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)(500),i=Object(s.a)(a,2),d=i[0],m=i[1],f=Object(o.useState)("rgb(255, 0, 0)"),x=Object(s.a)(f,2),p=x[0],y=x[1],S=Object(o.useState)(["rgb(220, 0, 0)","rgb(0, 220, 0)","rgb(0, 0, 220)"]),N=Object(s.a)(S,2),B=N[0],L=N[1],I=Object(o.useState)(!1),D=Object(s.a)(I,2),F=D[0],R=D[1],M=Object(o.useState)("rgb(255,255,255)"),z=Object(s.a)(M,2),J=z[0],q=(z[1],Object(o.useState)("brush")),P=Object(s.a)(q,2),A=P[0],T=P[1],Y=Object(o.useState)(1),U=Object(s.a)(Y,2),W=U[0],G=U[1],K=Object(o.useState)(!1),X=Object(s.a)(K,2),$=X[0],H=X[1],Q=Object(o.useState)(!1),V=Object(s.a)(Q,2),Z=V[0],_=V[1],ee=Object(o.useState)(!1),te=Object(s.a)(ee,2),ne=te[0],oe=te[1],ce=Object(o.useState)(0),re=Object(s.a)(ce,2),ae=re[0],se=re[1],ie=Object(o.useState)("Select a brush to get started!"),le=Object(s.a)(ie,2),ue=le[0],de=le[1],be=Object(o.useRef)();Object(o.useEffect)((function(){return E.on("joinedRoom",(function(e){console.log("succesfully joined room ",e)})),E.on("removedPeer",(function(e){console.log(e.id," left the room"),de("User ".concat(e.id," has left the room"))})),E.on("leftRoom",(function(e){console.log("left")})),E.on("createdPeer",(function(e){console.log(e.id," joined the room!"),de("User ".concat(e.id," has joined the room"))})),E.on("receivedPeerData",(function(e,t,n){console.log("data received...."),n.id&&(console.log("data received from: ".concat(n.id,"... contains: ").concat(t)),v(t,"redo"))})),sessionStorage.clear(),E.leaveRoom(),document.addEventListener("wheel",je),function(){document.removeEventListener("wheel",je)}}),[]);var je=function(e){e.deltaY>0?m((function(e){return e>50?e-50:e})):e.deltaY<0&&m((function(e){return e<800?e+50:e}))},me=function(e,t){de("Changed Brush color");var n,o=t?/^#([a-f0-9]{3}){1,2}$/.test(n=e)?(4==n.length&&(n="#"+[n[1],n[1],n[2],n[2],n[3],n[3]].join("")),"rgb("+[(n="0x"+n.substring(1))>>16&255,n>>8&255,255&n].join(", ")+")"):"":e;y((function(e){return o})),L((function(e){var t=e.indexOf(o);return o===e[0]?e:-1===t?[o,e[0],e[1]]:2===t?[o,e[0],e[1]]:[o,e[0],e[2]]}))},fe=function(e,t,n){T((function(e){return e?e===n?(document.querySelector("#".concat(n)).classList.toggle(t),!1):(document.querySelector("#".concat(e)).classList.toggle(t),document.querySelector("#".concat(n)).classList.toggle(t),n):(console.log("no tool"),document.querySelector("#".concat(n)).classList.toggle(t),n)}))},ge=function(e,t,n,o){if(n&&(o(!1),document.querySelector(".".concat(n)).classList.add(t),n===e.target.id))return;o(e.target.id),document.querySelector(".".concat(e.target.id)).classList.remove(t)},he=function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.querySelector("#canvas");case 2:n=e.sent,t(n).then((function(e){var t=new Image;t.src=e,document.body.appendChild(t)})).catch((function(e){console.log("gone wrong: ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(j.a)(b.a.mark((function e(t){var n,o,r,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],o=0;o<c;o++)for(r=0;r<c;r++)a=document.getElementById("[".concat(o,", ").concat(r,"]")).style["background-color"],n.push(a);return e.next=4,JSON.stringify(n);case 4:s=e.sent,localStorage.setItem("save",s),de("Canvas Saved...");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(j.a)(b.a.mark((function e(t){var n,o,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(localStorage.getItem("save"));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(c*c===n.length){e.next=8;break}return de("Your save file is not the same dimension as your current canvas (".concat(c," x ").concat(c,") ")),e.abrupt("return");case 8:for(xe(),o=0,r=0;r<c;r++)for(a=0;a<c;a++)document.getElementById("[".concat(r,", ").concat(a,"]")).style["background-color"]=n[o],o+=1;de("Canvas Loaded...");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){sessionStorage.clear(),se(0);for(var e=0;e<c;e++)for(var t=0;t<c;t++){document.getElementById("[".concat(e,", ").concat(t,"]")).style["background-color"]="rgb(255,255,255)"}};return Object(l.jsxs)("div",{className:"editor",children:[Object(l.jsxs)("nav",{className:"top-nav",children:[Object(l.jsxs)("div",{className:"dd-wrapper",children:[Object(l.jsx)("button",{id:"File",onClick:function(e){return ge(e,"hidden",Z,_)},children:"File"}),Object(l.jsxs)("div",{className:"drop-down hidden File",children:[Object(l.jsx)("button",{onClick:function(){return he(g.a)},children:"Download"}),Object(l.jsx)("button",{onClick:function(){return Oe("save")},children:"Save"}),Object(l.jsx)("button",{onClick:function(){return ve("save")},children:"Load"})]})]}),Object(l.jsxs)("div",{className:"dd-wrapper",children:[Object(l.jsx)("button",{id:"Edit",onClick:function(e){return ge(e,"hidden",Z,_)},children:"Edit"}),Object(l.jsxs)("div",{className:"drop-down hidden Edit",children:[Object(l.jsx)("button",{style:{color:ne?"grey":"white"},disabled:!!ne,onClick:function(){ae>0&&(de("Undo..."),se((function(e){return v(O(e-1),"undo"),e-1})))},children:"Undo"}),Object(l.jsx)("button",{style:{color:ne?"grey":"white"},disabled:!!ne,onClick:function(){return de("Redo..."),void se((function(e){var t=O(e);return t?(v(t,"redo"),e+1):e}))},children:"Redo"}),Object(l.jsx)("button",{style:{color:ne?"grey":"white"},disabled:!!ne,onClick:function(){r(2*c)},children:"Resize"}),Object(l.jsx)("button",{onClick:function(){return xe()},children:"Reset"}),Object(l.jsx)("button",{onClick:function(){return R(!F)},children:"Gridlines"})]})]}),Object(l.jsxs)("div",{className:"dd-wrapper",children:[Object(l.jsx)("button",{id:"MultiDraw",onClick:function(e){return ge(e,"hidden",Z,_)},children:"MultiDraw"}),Object(l.jsxs)("div",{className:"drop-down hidden MultiDraw",children:[Object(l.jsx)("button",{style:{color:ne?"grey":"white"},disabled:!!ne,onClick:function(){return H("MultiDraw")},children:"Join"}),Object(l.jsx)("button",{onClick:function(){ne&&(E.leaveRoom(),oe(!1),de("You have disconnected from MultiDraw room..."))},children:"Leave"})]})]}),Object(l.jsx)("p",{ref:be,className:"message-right",children:ue})]}),Object(l.jsxs)("nav",{className:"left-nav",children:[Object(l.jsxs)("div",{className:"current-color",children:[Object(l.jsx)("div",{className:"color color-main",style:{backgroundColor:B[0]}}),Object(l.jsx)("div",{className:"color",onClick:function(){return me(B[1],!1)},style:{backgroundColor:B[1]}}),Object(l.jsx)("div",{className:"color",onClick:function(){return me(B[2],!1)},style:{backgroundColor:B[2]}})]}),Object(l.jsx)(k,{changeColor:me}),Object(l.jsxs)("div",{className:"button-wrapper",children:[Object(l.jsx)("button",{id:"brush",className:"left-button",onClick:function(e){fe(0,"left-inactive","brush")},children:Object(l.jsx)(h.a,{})}),Object(l.jsx)("button",{onClick:function(){return W<3?G(W+1):null},children:"+"}),Object(l.jsx)("button",{onClick:function(){return W>1?G(W-1):null},children:"-"})]}),"brush"===A&&Object(l.jsx)(w,{history:function(e){E.shout("paint-data",e),se((function(t){return function(e,t){e||0===e||console.log("Error: Key is missing");try{sessionStorage.setItem(e,JSON.stringify(t))}catch(n){console.log(n)}}(t,e),t+1}))},size:W,currentColor:p}),Object(l.jsx)("div",{className:"button-wrapper",children:Object(l.jsxs)("button",{id:"bucket",className:"left-button left-inactive",onClick:function(e){fe(0,"left-inactive","bucket")},children:[Object(l.jsx)(h.b,{}),"WIP"]})})]}),Object(l.jsx)("div",{className:"canvas-container",children:Object(l.jsx)(C,{grid:F,backgroundColor:J,zoom:d,dimension:c})}),$?Object(l.jsx)(u,{window:$,close:function(){return H(!$)},click:function(e){var t;t=e,ne||(E.joinRoom(t),oe(!0),de("You have succesfully joined room ".concat(t,"..."))),H(!$)}}):null]})}n(698);function N(e){return Object(l.jsx)("div",{className:"page-cover"})}var B=function(){var e=Object(o.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(!1),a=Object(s.a)(r,2),i=a[0],u=a[1],d=Object(o.useState)(16),b=Object(s.a)(d,2),j=b[0],m=b[1],f=function(e){e>=16&&e<=64&&m(e)};return Object(l.jsxs)("div",{className:"App",children:[n?Object(l.jsx)(S,{dimension:j}):Object(l.jsxs)("div",{className:"homepage-container",children:[Object(l.jsxs)("div",{className:"homepage-header-div",children:[Object(l.jsx)("h1",{children:"React Pixel"}),Object(l.jsx)("p",{children:"An application for creating pixel art on the web!"})]}),Object(l.jsxs)("div",{className:"dimension-div",children:[Object(l.jsxs)("h4",{children:["Canvas Size: ",Object(l.jsx)("span",{children:j})," X ",Object(l.jsx)("span",{children:j})]}),Object(l.jsx)("button",{onClick:function(){return f(j/2)},children:"-"}),Object(l.jsx)("button",{onClick:function(){return f(2*j)},children:"+"})]}),Object(l.jsx)("button",{className:"start-button",onClick:function(){return u(!0),setTimeout((function(){c(!0)}),500),void setTimeout((function(){u(!1)}),1500)},children:"START NOW"})]}),i?Object(l.jsx)(N,{}):null]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,701)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(B,{})}),document.getElementById("root")),L()}},[[699,1,2]]]);
//# sourceMappingURL=main.fb6a858d.chunk.js.map